## A quick mathematical review

### Table of Contents

1. [Seed function](#seed-function)
2. [Orbit and truncated orbit](#orbit-and-truncated-orbit)
   - [Orbit](#orbit)
   - [Maximum iteration](#maximum-iteration)
   - [Truncated orbit](#truncated-orbit)
   - [Bailout inequality](#bailout-inequality)
3. [Fractal sets](#fractal-sets)
   - [Mandelbrot set](#mandelbrot-set)
   - [Julia sets](#julia-sets)
4. [Representation methods](#representation-methods)
   - [General definitions](#general-definitions)
   - [Coloring methods](#coloring-methods)

---

### Seed function

We define the seed function $f: \mathbb{C} \to \mathbb{C}$ by:
$$
f(z) = z^2 + c
$$
where $c$ is a complex number. We define the dynamic system, for $n\in\mathbb{N}$:
$$
\begin{equation}
\begin{cases}
z_0 = 0 \\
z_{n} = z_{n-1}^2 + c = F_n(c)
\end{cases}
\end{equation}
$$

### Orbit and truncated orbit

#### Orbit

Given $M\in\mathbb{R}_+^*$ and $f$ a seed function, we define the orbit of $c\in\mathbb{C}$ as:
$$
\begin{equation}
\begin{array}{rcl}
\mathcal{O}(c) &=& \left\lbrace
F_k(c) ~ ; ~ k\in\mathbb{N}^*, ~ \left| F_k(c) \right| < M
\right\rbrace\\ \\
&=& \left\lbrace
c, ~ F_1(c), ~ F_2(c), ~ \ldots
\right\rbrace
\end{array}
\end{equation}
$$

#### Maximum iteration

Given a maximum iteration number $\tilde{N}\in\mathbb{N}$, we define 
$N = \min\left( \tilde{N}, N^* \right)$ where $N^*$ is the first iteration of $F$ on $c$ where $\left|F_n(c)\right|$ reaches the bailout value $M$, i.e.
$$
\left|F_{N^*-1}(c)\right| < M \leq \left|F_{N^*}(c)\right|
$$

#### Truncated orbit

Let us denote for $n\geq 1$, $\mathbb{C}_n = \bigcup_{k=1}^{n+1}\mathbb{C}^k$, and define the truncated orbit of $c$, $\mathcal{O}_T(c)\in \mathbb{C}_{\tilde{N}}$
$$
\begin{equation}
\begin{array}{rcl}
\mathcal{O}_T(c) &=& \left\lbrace
F_k(c) ~ ; ~ k\leq N, ~ \left| F_k(c) \right| < M
\right\rbrace\\ \\
&=& \left\lbrace
c, ~ F_1(c), ~ F_2(c), ~ \ldots, ~ F_N(c)
\right\rbrace
\end{array}
\end{equation}
$$

#### Bailout inequality

We can express the bailout inequality with $N$ instead of $\tilde{N}$ to have:
$$
\begin{equation}
\left|F_{N-1}(c)\right| \leq M < \left|F_N(c)\right|
\end{equation}
$$

### Fractal sets

#### Mandelbrot set

The Mandelbrot set is the set of complex parameters $c$ for which the orbit of $z_0$ stays bounded:

$$
\begin{array}{rcl}
\mathcal{M} &=& \{ c \in \mathbb{C} ~ ; ~ \underset{n\in\mathbb{N}}{\sup}\,\left|z_n\right| \leq 2 \}\\ \\
&=& \{ c\in\mathbb{C} ~ ; ~ \forall n\in\mathbb{N}\,, |F_n(c)| \leq 2 \}
\end{array}
$$

From a computer science approach and with the previous 
definitions, we can also define the Mandelbrot set as a limit:
$$
\begin{equation}
\begin{array}{rcl}
\mathcal{M} &=& \underset{\tilde{N}\to\infty}{\lim}\{ c \in \mathbb{C} ~ ; ~ \underset{n\leq\tilde{N}}{\sup}\,\left|z_n\right| \leq 2 \}\\ \\
&=& \underset{\tilde{N}\to\infty}{\lim}\{ c\in\mathbb{C} ~ ; ~ \forall n\le\tilde{N}\,, \left|F_n(c)\right| \leq 2 \}
\end{array}
\end{equation}
$$

where $\tilde{N}$ represents the maximum iteration in the algorithm.

#### Julia sets

Given a complex number $c$, we define the following dynamical system:
$$
\left\lbrace\begin{array}{rcl}
z_0 &=& z\\
z_n &=& z_{n-1}^2 + c
\end{array}\right.
$$

The orbit of a point $z$ in the complex plan follows the same definition as before, but $c$ here is a given constant.

To distinguish the Mandelbrot set from Julia sets we introduce the following notation: $\mathcal F_n(z_0, c)$, $n\ge 1$ is the dynamical system generated by the seed function $f:(z, c)\to z^2+c$, starting at $F_0 = z_0$ for all $c$.

We can then describe the Mandelbrot set and the Julia sets as both a limit of $\mathcal F_n$, but from a different perspective:

$$
\begin{equation}
\left\lbrace
\begin{array}{rcl}
\mathcal M &=& \{ c \in\mathbb C ~ ; ~ \left| F_n(z_0, c) \right| \le 2\,, z_0 = 0 \}\\ \\
\mathcal J_x &=& \{ z_0 \in\mathbb C ~ ; ~ \left| F_n(z_0, c) \right| \le 2\,, c = x \}
\end{array}\right.
\end{equation}
$$

### Representation methods

#### General definitions

A ***coloring function*** $C: \mathbb{C}_{\tilde{N}}\to\mathbb{R}$ maps a truncated orbit to the real line:
$$
U(\mathcal{O}_T(c)) = u\in\mathbb{R}
$$

A ***color index function*** $I: \mathbb{R}\to\left[0,1\right]$ maps the coloring value of an orbit between $0$ and $1$:
$$
I(u) = i\in\left[0,1\right]
$$

A ***palette function*** $P: \left[0,1\right]\to\left[0,255\right]^3$ maps the coloring value of an orbit between $0$ and $1$:
$$
P(i) = p = (r,g,b)\in\left[0,255\right]^3
$$

***Note**: $(r,g,b)$ can also be expressed as a vector of $\left[0,1\right]^3$.*

#### Coloring methods

We consider a complex $c$ and its truncated orbit $\mathcal O_T(c)\in\mathbb C_{N}$.

A coloring function $u:\mathbb C_N\to\mathbb R$ is said to be ***smooth in $\mathit{\mathbf{c}}$*** if $u \circ\mathcal O_T \in \mathcal C^1(\mathbb C)$, or
$$
u(\mathcal O_T(c)) ~~ \text{and} ~~ \dfrac{\partial}{\partial c}u(\mathcal O_T(c)) ~~ \text{are continuous in } c
$$

Now let's suppose $z_n$ such that $|z_n|\gg|c|$.

So $z_n \simeq z_{n-1}^p$ i.e. for $z_0 = r_0e^{\imath\theta_0} \Rightarrow z_n = r_0^{p^n}e^{\imath p^n\theta_0}$ with $|z_n| = r_0^{p^n}$

The bailout inequality gives $M < |z_N| \le M^p$. We can then write $u(r_N) = u(r_0^{p^n})$ and define the following:

The **continuous iteration count** coloring function $u:\mathbb C_N \to \mathbb R$ is defined by:
$$
\begin{equation}
u(r_N) = N + \dfrac{M^p - r_N}{M^p - M}
\end{equation}
$$
where $N$ is the the **iteration count** and $\dfrac{M^p-r_N}{M^p-M}$ is the decimal part that can be interpreted as linear interpolation in the interval $\left[ M, M^p \right]$, such that: $N < u(r_N) \le N+1\,$.

The bailout inequality in $N$ gives:
$$
M < r_0^{p^N} \le M^p
$$
which leads to $\ln M < p^N\ln r_0 \le p\ln M$ and it gives:
$$
\begin{equation}
\dfrac{1}{\ln p} \ln\left(\dfrac{\ln M}{\ln r_0}\right)
< N \le
1 + \dfrac{1}{\ln p}\ln\left(\dfrac{\ln M}{\ln r_0}\right)
\end{equation}
$$

We can see $1+\dfrac{1}{\ln p}\ln\left(\dfrac{\ln M}{\ln r_0}\right) = v(r_0)$ as a coloring function by substituting $r_0 = r_N^{p^{-N}}$ to give the following definition:

The **smooth iteration count** coloring function $u:\mathbb C_N \to \mathbb R$ is defined by:
$$
\begin{equation}
u(r_N) = N + 1 + \dfrac{1}{\ln p}\ln\left(\dfrac{\ln M}{\ln r_N}\right)
\end{equation}
$$